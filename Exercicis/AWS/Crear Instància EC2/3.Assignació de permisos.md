# Grups de seguretat

## Objectiu

La nostra infraestructura a AWS disposa de diversos serveis de xarxa (web, SSH, bases de dades, etc.).
L’objectiu d’aquest exercici és verificar que la configuració de seguretat és correcta, comprovant que:

1. Existeixen els Security Groups necessaris.
1. En el cas que no existeixi cal crear el grup.
1. Cada servei té oberts els ports requerits, tant en versió segura com insegura quan correspongui.
1. Si algun port dels especificats no està obert, caldrà obrir-lo.

Cal utilitzar l’AWS CLI (`aws ec2`) per a fer el script.

---

## Fitxer de configuració

S’utilitzarà un fitxer anomenat `configPorts.conf`, que defineix els serveis i els ports que han d’estar habilitats.

Exemple de contingut del fitxer:

```
web:tcp/80,tcp/443
dns:udp/53
ssh:tcp/22
```

 Cada línia representa un servei.
 
 El format és:  

  `nom_servei:port1,port2,...`

Cada servei utilitza un Security Group amb el mateix nom, excepte el servei ssh, que utilitza el Security Group default.  

---

## Resultat final

1. La infraestructura AWS conté tots els grups de seguretat especificats en el fitxer `configPorts.conf`.
1. Cada grup de seguretat té oberts els ports segons la configuració emmagatzemada a `configPorts.conf`.
1. Pot ser que hi hagi altres grups (ja existents) oberts a AWS.
1. Pot ser que hi hagi altres ports (ja existents) oberts a AWS.
1. El nostre script només pot crear i obrir els ports especificats en el fitxer.
1. Cada servei utilitza un Security Group amb el mateix nom, excepte el servei ssh, que utilitza el Security Group default.  

